


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lab 5: Verwalten von Workloads &mdash; Nutanix Technology Bootcamp  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 6: Data Protection" href="../Lab6/lab6.html" />
    <link rel="prev" title="Lab 4: Bereitstellen von Workloads" href="../Lab4/lab4.html" />
 
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #024DA1" >
          

          
            <a href="../index.html" class="icon icon-home"> Nutanix Technology Bootcamp
          

          
            
            <img src="../_static/Logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">BootCamp Infos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../trainer/trainer.html">Heutige Drill Instructor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clusteraccess/clusteraccess.html">Zugang zur Lab Umgebung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../clusteraccess/clusteraccess.html#zugangs-ubersicht">Zugangs-Übersicht</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusteraccess/clusteraccess.html#pulse-secure-vpn-client-empfohlen">Pulse Secure VPN Client (empfohlen)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusteraccess/clusteraccess.html#parallels-vdi-zugang-optional">Parallels VDI Zugang (optional)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../clusterdetails/clusterdetails.html">HPoC Cluster Details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#cluster-hardware-details">Cluster Hardware Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#infrastruktur-ip-s">Infrastruktur IP’s</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#virtuelle-maschienen">Virtuelle Maschienen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#images-vm-vorlagen-iso-s">Images / VM Vorlagen &amp; ISO’s</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#zugangsdaten">Zugangsdaten</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clusterdetails/clusterdetails.html#netzwerk">Netzwerk</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Labs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Lab1/lab1.html">Lab 1: Überblick</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab1/lab1.html#prism-element">Prism Element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab1/lab1.html#prism-element-ruckblick">Prism Element - Rückblick</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab1/lab1.html#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Lab2/lab2.html">Lab 2: Storage Konfiguration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab2/lab2.html#distributed-storage-fabric">Distributed Storage Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab2/lab2.html#anlegen-konfiguration-eines-storage-containers">Anlegen &amp; Konfiguration eines Storage Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab2/lab2.html#redundancy-factor-rf">Redundancy Factor (RF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab2/lab2.html#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Lab3/lab3.html">Lab 3: Netzwerk Konfiguration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab3/lab3.html#ahv-netzwerk-grundlagen">AHV Netzwerk-Grundlagen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Lab3/lab3.html#virtuelle-netzwerke">Virtuelle Netzwerke</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab3/lab3.html#virtual-nics">Virtual NICs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab3/lab3.html#ip-address-management-ipam">IP Address Management (IPAM)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Lab3/lab3.html#netzwerk-konfiguration">Netzwerk-Konfiguration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Lab3/lab3.html#nutzer-vm-netzwerk-einrichten">Nutzer VM Netzwerk einrichten</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Lab3/lab3.html#nutzer-vm-netzwerk-mit-ipam-einrichten">Nutzer VM Netzwerk mit IPAM einrichten</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Lab3/lab3.html#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Lab4/lab4.html">Lab 4: Bereitstellen von Workloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab4/lab4.html#image-service">Image Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab4/lab4.html#bereitstellen-einer-linux-vm-disk-image">Bereitstellen einer Linux VM (Disk Image)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab4/lab4.html#bereitstellen-einer-windows-vm-iso">Bereitstellen einer Windows VM (ISO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab4/lab4.html#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lab 5: Verwalten von Workloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#power-aktionen-und-konsolen-zugang">Power Aktionen und Konsolen Zugang</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vm-clonen">VM Clonen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vm-migrationen">VM Migrationen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#affinity-policies">Affinity Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#high-availability-dynamic-scheduling">High Availability &amp; Dynamic Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Lab6/lab6.html">Lab 6: Data Protection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab6/lab6.html#vm-snapshots">VM Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab6/lab6.html#protection-domains">Protection Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab6/lab6.html#zusammenfassung">Zusammenfassung</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nutanix Technology Bootcamp</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Lab 5: Verwalten von Workloads</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Lab5/lab5.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lab-5-verwalten-von-workloads">
<h1>Lab 5: Verwalten von Workloads<a class="headerlink" href="#lab-5-verwalten-von-workloads" title="Permalink to this headline">¶</a></h1>
<p>Jetzt da wir einige VMs bereits ausgerollt haben, lassen Sie uns anhand dieser ein paar VM Verwaltungsmöglichkeiten mit AHV (Power Aktionen, Klonen und Migration) erkunden.</p>
<div class="section" id="power-aktionen-und-konsolen-zugang">
<h2>Power Aktionen und Konsolen Zugang<a class="headerlink" href="#power-aktionen-und-konsolen-zugang" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>In <strong>Prism Element &gt; VM &gt; Table</strong> nutzen die die Suche, um Ihre Linux VM die Sie in dem vorherigen Lab angelegt haben, zu finden (<em>Initialen</em>-LinuxVM).</p>
<p>Note that the Power State column for that VM shows a red dot, indicating that the VM is powered off.</p>
</li>
<li><p>Wählen Sie die VM aus und stellen Sie sicher, dass diese noch läuft. (Falls nicht, klicken Sie auf <strong>Power On</strong>).</p></li>
<li><p>Bei ausgewählter VM klicken Sie unterhalb der VM Tabelle auf <strong>Launch Console</strong>.</p>
<p>Das HTML5 Konsolen Fenster bietet rechts oben 4 Aktionen:</p>
<blockquote>
<div><div class="figure align-default">
<img alt="../_images/vmactionoptions.png" src="../_images/vmactionoptions.png" />
</div>
</div></blockquote>
<ul class="simple">
<li><p><strong>Mount ISO</strong>: Bietet die Option eine ISO aus dem Image Service zu mounten.</p></li>
</ul>
<blockquote>
<div><div class="figure align-default">
<img alt="../_images/mountiso.png" src="../_images/mountiso.png" />
</div>
</div></blockquote>
<ul class="simple">
<li><p><strong>CTRL-ALT-DEL</strong>: Sendet Ctrl+Alt+Del an die VM.</p></li>
<li><p><strong>Take Screen Capture</strong>: Nimmt einen Screenshot als png Datei auf.</p></li>
<li><p><strong>Power off / Reset VM</strong></p></li>
</ul>
<blockquote>
<div><div class="figure align-default">
<img alt="../_images/poweroffvm.png" src="../_images/poweroffvm.png" />
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Für ESXi: Die Schritte in dieser Übung können ebenfalls aus Prism heraus durchgeführt werden wenn ein Cluster verwendet wird welches ESXi as Hypervisor verwendet und vCenter in Prism registriert hat</p>
<div class="figure align-default">
<img alt="../_images/manage_workloads_06.png" src="../_images/manage_workloads_06.png" />
</div>
</div>
</li>
</ol>
</div>
<div class="section" id="vm-clonen">
<h2>VM Clonen<a class="headerlink" href="#vm-clonen" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>In <strong>Prism Element &gt; VM &gt; Table</strong> wählen Sie Ihre <em>Initialen</em>-LinuxVM aus.</p></li>
<li><p>Klicken Sie auf <strong>Clone</strong> von der <strong>Actions</strong> Liste.</p></li>
<li><p>Füllen Sie die folgenden Details aus und klicken Sie auf <strong>Save</strong>:</p>
<ul class="simple">
<li><p><strong>Number of Clones</strong> - 2</p></li>
<li><p><strong>Prefix Name</strong>  - <em>Initialen</em>-LinuxVM**-Clone**</p></li>
<li><p><strong>Starting Index Number</strong> - 1</p></li>
</ul>
<div class="figure align-default">
<img alt="../_images/manage_workloads_02.png" src="../_images/manage_workloads_02.png" />
</div>
</li>
<li><p>Lassen Sie diese <strong>Powered Off</strong>.</p>
<p>Sowohl Nutanix Snapshots als auch Clone’s verwenden ein <a class="reference external" href="https://nutanixbible.com/#anchor-book-of-acropolis-snapshots-and-clones">redirect-on-write</a> Algorithmus um schnell und effizient Kopien von VMs durch Metadata Operationen zu erstellen.</p>
</li>
</ol>
</div>
<div class="section" id="vm-migrationen">
<h2>VM Migrationen<a class="headerlink" href="#vm-migrationen" title="Permalink to this headline">¶</a></h2>
<p>VM Live Migrationen sind ein kritisches Feature für jede virtualisierte Umgebung, da nur so VMs nahtlos zwischen Hosts innerhalb eines Clusters verschoben werden können um Infrastruktur Wartung oder Lastverteilung durchführen zu können.</p>
<ol class="arabic">
<li><p>In <strong>Prism Element &gt; VM &gt; Table</strong> wählen Sie ihre <em>Initialen</em>-LinuxVM aus.</p>
<p>Sie sollten nun sehen, dass die VM keinen Eintrag in der <strong>Host</strong> Spalte besitzt solange diese ausgeschaltet ist.</p>
<div class="figure align-default">
<img alt="../_images/lab5-1.png" src="../_images/lab5-1.png" />
</div>
</li>
<li><p>Wählen Sie die VM aus und starten Sie diese (<strong>Powered On</strong>). Nun sollte in der Spalte <strong>Host</strong> einer der Hosts im Cluster erscheinen.</p>
<div class="figure align-default">
<img alt="../_images/lab5-2.png" src="../_images/lab5-2.png" />
</div>
</li>
<li><p>Klicken Sie als nächstes auf <strong>Migrate</strong>.</p>
<p>Sie können entweder einen der Hosts in dem Cluster als Migrationsziel bestimmen oder standardmäßig AHV automatisch den passenden Hosts auswählen lassen.</p>
<div class="figure align-default">
<img alt="../_images/lab5-3.png" src="../_images/lab5-3.png" />
</div>
</li>
<li><p>Klicken Sie auf <strong>Migrate</strong> um den Schritt abzuschließen.</p>
<p>Wenn der Schritt abgeschlossen ist, stellen Sie sicher, dass Ihre VM nun auf einem anderen Host läuft als zuvor.</p>
<div class="figure align-default">
<img alt="../_images/lab5-4.png" src="../_images/lab5-4.png" />
</div>
</li>
</ol>
</div>
<div class="section" id="affinity-policies">
<h2>Affinity Policies<a class="headerlink" href="#affinity-policies" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>In <strong>Prism Element &gt; VM &gt; Table</strong> selektieren Sie Ihre <em>Initialen</em>-LinuxVM aus.</p></li>
<li><p>Wählen Sie <strong>Powered Off</strong> VM, dann klicken Sie auf <strong>Update</strong> und <strong>+ Set Affinity</strong>.</p></li>
<li><p>Wählen Sie <strong>zwei</strong> <strong>Hosts</strong> aus, zu welcher die VM eine <em>Affinity</em> haben soll und klicken sie auf <strong>Save</strong> und <strong>Save</strong> um den Prozess abzuschließen.</p>
<div class="figure align-default">
<img alt="../_images/lab5-5.png" src="../_images/lab5-5.png" />
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Wir selektieren mehr als einen Host, sodass die VM ein Migrationsziel hat, falls ein Host ausfallen sollte.</p>
</div>
</li>
<li><p>Starten Sie die VM und verifizieren Sie, dass Sie auf einem der <strong>Host</strong> läuft welchen sie in der <em>Affinity Policy</em> angegeben.</p></li>
<li><p>Wählen Sie die VM aus und klicken dann auf <strong>Migrate</strong>.</p>
<p>Sie sollten nun die folgende Nachricht angezeigt bekommen:</p>
<div class="figure align-default">
<img alt="../_images/lab5-6.png" src="../_images/lab5-6.png" />
</div>
<ul class="simple">
<li><p>Diese VM hat eine <strong>Host Affinity</strong> mit 2 von 4 verfügbaren Host und kann daher nur auf diesen Host migriert werden.</p></li>
</ul>
</li>
<li><p>Klicken Sie auf <strong>Migrate</strong>.</p>
<p>Sie sollten nun sehen können wie die VM auf den anderen Host verschoben wurde.</p>
</li>
</ol>
<p>VM-zu-Host Affinity Policies werden typischerweise genutzt um VMs auf bestimmte Host zu binden, z.B. aus Performance oder Lizenz-Gründen. AHv kann darüber hinaus auch VM-zu-VM <em>Anti-Affinity</em> Regeln erstellen, z.B. für Anwendungen bei denen man sicherstellen möchte, dass mehrere Instanzen einer Anwendungn nicht auf dem gleichen Host laufen.</p>
</div>
<div class="section" id="high-availability-dynamic-scheduling">
<h2>High Availability &amp; Dynamic Scheduling<a class="headerlink" href="#high-availability-dynamic-scheduling" title="Permalink to this headline">¶</a></h2>
<p>Im Gegensatz zu ESXi, ist bei AHV <em>High Availability</em> standardmäßig bereits aktiviert und sorgt dafür, dass VMs im Falle eines Host Ausfalles bestmöglich (<em>best effort</em>) auf anderen Host wieder neugestarted werden. Zusätzliche Konfiguration erlaubt es Ressourcen zu reservieren, um sicherzustellen, dass auch genügend Ressourcen vorhanden sind um alle VMs neustarten zu können.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Um Memory Reservierungen vorzunehmen, wählen Sie <strong>Enable HA Reservation</strong> unter <strong>Prism Element &gt; Settings &gt; Manage VM High Availability</strong>.</p>
<div class="figure align-default">
<img alt="../_images/lab5-7.png" src="../_images/lab5-7.png" />
</div>
<p>Da Memory auf dieser Testumgebung allerdings bereits reduziert ist, aktivieren Sie bitte <strong>keine</strong> <em>HA memory reservations</em>.</p>
</div>
<p>Mit dem <strong>Acropolis Dynamic Scheduler</strong> (ADS) Service nimmt AHV ein intelligentes initiales Platzieren von VMs vor und kann VMs dynamisch zu anderen Host im Cluster verschieben um Performance zu optimieren. Dies läuft bereits standardmäßig (<em>out of the box</em>) ohne zusätzliche Konfiguration.</p>
<p>Ein Mehrwert der Nutanix AHV Lösung ist, dass VM Platzierungs-Entscheidungen nicht nur ausschließlich auf CPU &amp; Memory Engpass-Vermeidung basiert, sondern ebenso Storage Performance miteinbeziehen kann.</p>
<p>Mehr Informationen bzgl. des <strong>Acropolis Dynamic Scheduler</strong> ist <a class="reference external" href="https://nutanixbible.com/#anchor-book-of-acropolis-dynamic-scheduler">hier</a> in der Nutanix Bible zu finden.</p>
</div>
<div class="section" id="zusammenfassung">
<h2>Zusammenfassung<a class="headerlink" href="#zusammenfassung" title="Permalink to this headline">¶</a></h2>
<p>In diesem Lab haben Sie erlebt welche vielfältigen Werkzeuge und Optionen AHV bietet um VMs in dem Cluster zu verwalten. AHV bietet kritische Funktionen wie Live Migration, Hochverfügbarkeit (High Availability) und Dynamischer VM Platzierung (Dynamic VM Placement) “out-of-the-box” ohne zusätzliche Konfiguration an. AHV VMs können darüber hinaus nicht nur durch Prism verwaltet werden, sondern ebenfalls via CLI oder REST API. Es ist ebenso möglich ein ESXi Cluster in Prism zu registrieren und ein paar Basis VM Tasks ebenso direkt aus Prism heraus durchzuführen.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Lab6/lab6.html" class="btn btn-neutral float-right" title="Lab 6: Data Protection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Lab4/lab4.html" class="btn btn-neutral float-left" title="Lab 4: Bereitstellen von Workloads" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Nutanix Germany GmbH | 

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>